<div class="panel-body block panel-body--has-tab_block">
    <ul class="nav nav-tabs nav-tabs-alt">
        <li class="active">
            <a href="#panel_content{{index}}01" data-toggle="tab">基本情報</a>
        </li>
        <li>
            <ng-container *ngIf="!isOrder">
                <a href="#panel_content{{index}}02" data-toggle="tab">取引実績・在庫数</a>
            </ng-container>
        </li>
        <li class="pull-right">
            <div class="block-options-simple">
                <a (click)="viewProductInfo()" class="btn btn-link">詳細</a>
                <button class="btn btn-success" *ngIf="statusExport" [disabled]="product.requestProduction!=1"
                        (click)="exportPDF()">
                    <label *ngIf="product.factoryId!=4">製造仕様書出力</label>
                    <label *ngIf="product.factoryId==4">商事発注書出力</label>
                </button>
                <button class="btn btn-success" *ngIf="notUsingProduct!=null"
                        (click)="addProductToDeal()">案件追加
                </button>
            </div>
        </li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane tab-pane--default active" id="panel_content{{index}}01">
            <div class="row">
                <div class="col-sm-3 panel-body__thumb">
                    <file-viewer [srcFile]="product.srcImg"></file-viewer>
                </div>
                <div class="col-sm-9">
                    <div class="row">
                        <div class="col-sm-12">
                            <table class="table table-condensed">
                                <tbody>
                                <tr>
                                    <th style="width: 12%">製品ID</th>
                                    <td style="width: 15%">{{product.productCode}}</td>
                                    <th style="width: 18%">製品種類</th>
                                    <td style="width: 15%">{{productType}}</td>
                                    <th style="width: 20%">得意先製品番号</th>
                                    <td style="width: 20%">{{product.customerProductCode}}</td>
                                </tr>
                                <tr>
                                    <th>製品名</th>
                                    <td colspan="3">{{product.productName| ellipsis: 20}}</td>
                                    <th>製造依頼先</th>
                                    <td><strong>{{requestProduct}}</strong></td>
                                </tr>
                                <tr>
                                    <th style="vertical-align: middle">サイズ</th>
                                    <td colspan="3" style="vertical-align: middle">{{getDimension(product)}}</td>
                                    <th style="vertical-align: middle">ロット</th>
                                    <td style="vertical-align: middle">
                                        <span *ngIf="!isRequestDesign">
                                            <strong>{{product.lot | numberFormat}}</strong>{{product.lot!=null?'ロット':''}}
                                        </span>
                                        <span *ngIf="isRequestDesign">
                                            <div class="row">
                                                <div class="col-sm-8 remove-margin">
                                                    <div class="form-material--group">
                                                        <input type="text" class="form-control input-sm text-right"
                                                               number-input [(numberValue)]="product.requestLot"
                                                               [numberPrecision]="0" [maxValue]="999999"
                                                               (change)="onChangedProductLot()">
                                                    </div>
                                                </div>
                                            </div>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <th>材料</th>
                                    <td colspan="3">{{getPaperName(product)}}</td>
                                    <th><span *ngIf="!isRequestDesign">提出単価</span></th>
                                    <td>
                                        <span *ngIf="!isRequestDesign">
                                            <strong>{{product.unitPrice | number :'1.2-2'}}</strong>{{product.unitPrice!=null?'円':''}}
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <th>木型</th>
                                    <td colspan="3">{{product.woodenCode}}</td>
                                    <th><span *ngIf="!isRequestDesign">提出金額</span></th>
                                    <td>
                                        <span *ngIf="!isRequestDesign"><strong>{{product.totalCost | numberFormat}}</strong>{{product.totalCost!=null?'円':''}}</span>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <table class="table table-condensed">
                                <tbody class="has-strong-top-border">
                                <tr>
                                    <th style="width: 12%">メモ</th>
                                    <td style="width: 88%">
                                        <div class="block-with-text">{{product.memo}}</div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane tab-pane--stock" id="panel_content{{index}}02">
            <div class="row">
                <div class="col-sm-7">
                    <div class="row push-10-t">
                        <div class="col-sm-10">
                            <span class="push-15-l">直近のお取引状況</span>
                        </div>
                        <div class="col-sm-2">
                            <button type="button" class="btn btn-link remove-padding" disabled>詳細</button>
                        </div>
                    </div>

                    <div class="row push-10-t">
                        <div class="col-sm-12">
                            <table class="table table-striped table-condensed">
                                <thead>
                                <tr>
                                    <th>日付</th>
                                    <th>案件名</th>
                                    <th>注文数</th>
                                    <th>単価</th>
                                    <th>金額</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr *ngFor="let transaction of transactions">
                                    <td>{{transaction.updatedDate | date: 'yyyy/MM/dd'}}</td>
                                    <td>{{transaction.dealName | ellipsis}}</td>
                                    <td>{{transaction.quantity==null?'': (transaction.quantity| numberFormat) + ' ロット'}}
                                    </td>
                                    <td>{{transaction.submittedPrice ==null?'': '@ '+(transaction.submittedPrice|
                                        number : '1.2-2')}}
                                    </td>
                                    <td>{{transaction.total==null?'': (transaction.total| numberFormat) + ' 円'}}
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="col-sm-5">
                    <div class="row push-10-t">
                        <div class="col-sm-10">
                            <span class="push-15-l">在庫リスト</span>
                        </div>
                        <div class="col-sm-2">
                            <button type="button" class="btn btn-link remove-padding" disabled>詳細</button>
                        </div>
                    </div>

                    <div class="row push-10-t">
                        <div class="col-sm-12">
                            <table class="table table-striped table-condensed">
                                <thead>
                                <tr>
                                    <th>製品名</th>
                                    <th>在庫数</th>
                                    <th>単価</th>
                                    <th>日数</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>{{inventory.productName | ellipsis}}</td>
                                    <td>{{inventory.quantity | numberFormat}}</td>
                                    <td>{{inventory.unitPrice | number : '1.2-2'}}</td>
                                    <td>{{inventory.days}}{{inventory.days!=null?' 日':''}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- /製品情報 -->